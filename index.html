<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>esewa Records</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <form class="form-box" id="gameForm">
      <h1>esewa record</h1>

      <label> Name:</label>
      <input type="text" name="playerName" placeholder="Enter  name">

      <label>esewa:</label>
      <input type="text" name="cashtag">

      <label>pl:</label>
      <select name="game">
        <option>ab</option>
        <option>cd</option>
        <option>ef</option>
      </select>

      <label>aako:</label>
      <input type="number" name="cashin">

      <label>gako:</label>
      <input type="number" name="cashout">

      <label>Employee:</label>
      <select name="employee">
        <option>AWs</option>
        <option>John</option>
        <option>Lisa</option>
      </select>

      <label>Date:</label>
      <input type="date" name="date" id="date">

      <label>Time:</label>
      <input type="time" name="time" id="time">

      <label>Remarks:</label>
      <textarea name="remarks" placeholder="Enter remarks..."></textarea>

      <label>Record from:</label>
      <select name="recordFrom">
        <option>1231</option>
        <option>M</option>
        <option>J</option>
      </select>

      <button type="submit">Submit</button>
    </form>
  </div>

 <script>
  // Prefill date and time
  window.onload = () => {
    const now = new Date();
    document.getElementById("date").value = now.toISOString().split("T")[0];
    document.getElementById("time").value = now.toTimeString().slice(0, 5);
  };

  document.getElementById("gameForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const form = this;
    const formData = new FormData(form);
    const json = {};

    // Validate required fields
    const requiredFields = ["playerName", "cashtag", "cashin", "cashout", "employee", "date", "time", "recordFrom"];

    let valid = true;
    requiredFields.forEach(field => {
      const value = formData.get(field);
      if (!value || value.trim() === "") {
        valid = false;
        alert(`Please fill out the field: ${field}`);
      }
    });

    if (!valid) {
      return; // Stop submitting if validation fails
    }

    formData.forEach((value, key) => {
      json[key] = value;
    });

    fetch('https://script.google.com/macros/s/AKfycbzkhp5I8cgmvva1nLjRWU8fOYIf2HCZx1OAV3TFtZ7o_YJWBDurPJhlpSWrlCglk5c/exec', {
      method: 'POST',
      body: JSON.stringify(json),
      headers: {
        'Content-Type': 'application/json'
      }
    })
    .then(response => response.text())
    .then(text => {
      console.log("Response:", text);
      if (text.includes("Success")) {
        alert("Submitted successfully!");
        form.reset();
      } else {
        alert("Error submitting form: " + text);
      }
    })
    .catch(error => {
      console.error("Error:", error);
      alert("Network error submitting form.");
    });
  });
</script>

  
</body>
</html>
