<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Records</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <form class="form-box" id="gameForm">
      <h1>Game Records</h1>

      <label> Name:</label>
      <input type="text" name="playerName" placeholder="Enter player's name">

      <label>esewa:</label>
      <input type="text" name="cashtag">

      <label>pl:</label>
      <select name="game">
        <option>ab</option>
        <option>cd</option>
        <option>ef</option>
      </select>

      <label>aako:</label>
      <input type="number" name="cashin">

      <label>gako:</label>
      <input type="number" name="cashout">

      <label>Employee:</label>
      <select name="employee">
        <option>AWs</option>
        <option>John</option>
        <option>Lisa</option>
      </select>

      <label>Date:</label>
      <input type="date" name="date" id="date">

      <label>Time:</label>
      <input type="time" name="time" id="time">

      <label>Remarks:</label>
      <textarea name="remarks" placeholder="Enter remarks..."></textarea>

      <label>Record from:</label>
      <select name="recordFrom">
        <option>1231</option>
        <option>M</option>
        <option>J</option>
      </select>

      <button type="submit">Submit</button>
    </form>
  </div>

  <script>
    // Prefill date and time
    window.onload = () => {
      const now = new Date();
      document.getElementById("date").value = now.toISOString().split("T")[0];
      document.getElementById("time").value = now.toTimeString().slice(0, 5);
    };
  
    document.getElementById("gameForm").addEventListener("submit", function(e) {
      e.preventDefault();
  
      const formData = new FormData(this);
      const json = {};
  
      formData.forEach((value, key) => {
        json[key] = value;
      });


      fetch('https://script.google.com/macros/s/AKfycbzs8eh8DaOGpI3SXkM4v45ZsCQoPD7USQs4QaGvqymQY8Y87nkHEtvIHx5PjGZP-dGXoA/exec', {
  method: 'POST',
  body: JSON.stringify(json),
  headers: {
    'Content-Type': 'application/json'
  }
})
.then(response => response.text())
.then(text => {
  console.log("Response:", text);
  if (text.includes("Success")) {
    alert("Submitted successfully!");
    document.getElementById("gameForm").reset();
  } else {
    alert("Error submitting form: " + text);
  }
})
.catch(error => {
  console.error("Error:", error);
  alert("Network error submitting form.");
});
  
      fetch('https://script.google.com/macros/s/AKfycbzs8eh8DaOGpI3SXkM4v45ZsCQoPD7USQs4QaGvqymQY8Y87nkHEtvIHx5PjGZP-dGXoA/exec', {
        method: 'POST',
        body: JSON.stringify(json),
        headers: {
          'Content-Type': 'application/json'
        }
      }).then(response => {
        if (response.ok) {
          alert("Submitted successfully!");
          this.reset();
        } else {
          alert("Submission failed.");
        }
      }).catch(error => {
        console.error("Error:", error);
        alert("Error submitting form.");
      });
    });
  </script>
  
</body>
</html>
